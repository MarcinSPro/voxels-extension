function loadPassPage(){chrome.storage.local.get("pid",async function(e){let s=e.pid;loadingScreenFull(1);try{let a=await makeFetchRequestByPID(apiURL,{pid:s,operation:"fetchPassData"});handleErrors(a)||("logout"==a?initiate():(loadingScreenFull(0),loadVoxelsPasses(a.data)))}catch(t){loadingScreenFull(0),quickMessage("Please try again.","error"),console.error(t)}})}function loadVoxelsPasses(e){let s=e.voxels_addresses;var a=document.getElementById("voxels-full-page-main");a.innerHTML="";var t=document.createElement("div");t.setAttribute("id","voxels-pass-main");var i=document.createElement("h2");i.textContent="Redeem Pass",t.appendChild(i);let l=limiter(function(){inputWithCallback("Enter your Voxels Pass code:",function(e){/^[a-zA-Z0-9]{15}$/.test(e)?redeemPass(e):showAlert("Invalid pass code. Please ensure it is exactly 15 alphanumeric characters.","error")})},5e3);var r=document.createElement("button");r.textContent="Click here to redeem a Voxels Pass",r.classList.add("voxels-pass-redeem-button","clickable"),t.appendChild(r),r.addEventListener("click",l),(horizontalLine=document.createElement("hr")).classList.add("voxels-pass-spacer"),t.appendChild(horizontalLine);var n=document.createElement("h2");n.textContent="Buy Voxels Passes",t.appendChild(n);var d=document.createElement("p");d.innerHTML=`Select amount of passes and send the required amount from your wallet connected to <span>${e.username}</span> to the specified address.`,t.appendChild(d);var c=document.createElement("div");c.classList.add("voxels-pricing-container"),t.appendChild(c),Object.entries(e.pixels_prices).forEach(([s,a],t)=>{var i=document.createElement("div");i.classList.add("voxels-subscription-option","clickable"),0===t&&i.classList.add("voxels-premium-price-active");let l=function e(s,a,t){if("1"===s)return null;let i=t["1"]*s,l=((i-a)/i*100).toFixed(0);return l>0?l:null}(s,a,e.pixels_prices);i.innerHTML=`
            <div class="voxels-price-duration">${s} pass${s>1?"es":""}</div>
            <div class="voxels-price-amount">
              <img class="pixels-icon" src="`+chrome.runtime.getURL("images/Other/Pixel.png")+`">
              ${a}
            </div>
            ${l?`<div class="voxels-price-saving">Save ${l}%</div>`:""}
        `,i.addEventListener("click",function(){document.querySelectorAll(".voxels-subscription-option").forEach(e=>{e.classList.remove("voxels-premium-price-active")}),i.classList.add("voxels-premium-price-active")}),c.appendChild(i)});var o=document.createElement("p");o.classList.add("voxels-pass-copy","clickable"),o.setAttribute("id","voxels-copy"),o.setAttribute("translate","no"),o.innerHTML=e.voxels_addresses.rns+"<img src='"+chrome.runtime.getURL("images/icons/icon__copy.svg")+"' alt='Copy Icon'>",t.appendChild(o),o.addEventListener("click",function(){var s=document.createElement("textarea");s.value=e.voxels_addresses.rns,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s)});var p=document.createElement("p");p.classList.add("voxels-premium-copy","clickable"),p.setAttribute("translate","no");let v=s.base.replace(/^(.{6})(.*)(.{6})$/,"$1...$3");p.innerHTML=v+"<img src='"+chrome.runtime.getURL("images/icons/icon__copy.svg")+"' alt='Copy Icon'>",t.appendChild(p),p.addEventListener("click",function(){var s=document.createElement("textarea");s.value=e.voxels_addresses.base,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s)});var u=document.createElement("p");u.innerHTML="<span>After sending $PIXEL click:</span>",t.appendChild(u);var m=document.createElement("p");m.classList.add("voxels-pass-reload","clickable"),m.innerHTML="Claim Passes<img src='"+chrome.runtime.getURL("images/icons/icon__refresh.svg")+"' alt='Refresh Icon'>",t.appendChild(m);var g=0;m.addEventListener("click",function(){var e=Date.now();if(e-g<1e4){showAlert("Please wait 10s before retrying.","error");return}g=e,m.disabled=!0,setTimeout(function(){m.disabled=!1},1e4),checkPasses()}),(horizontalLine=document.createElement("hr")).classList.add("voxels-pass-spacer"),t.appendChild(horizontalLine);var x=document.createElement("h2");x.textContent="My Passes (click here)",x.classList.add("clickable"),t.appendChild(x),x.addEventListener("click",function(){loadPlayerPasses()}),a.appendChild(t)}function redeemPass(e){chrome.storage.local.get("pid",async function(s){let a=s.pid;loadingScreenFull(1);try{let t=await makeFetchRequestByPID(apiURL,{pid:a,operation:"redeemPass",extra:e});handleErrors(t)||("logout"==t?initiate():(loadingScreenFull(0),quickMessage("Your pass has been successfully redeemed! Reload Pixels.","success")))}catch(i){loadingScreenFull(0),quickMessage("Please try again.","error"),console.error(i)}})}function checkPasses(){chrome.storage.local.get("pid",async function(e){let s=e.pid;loadingScreenFull(1);try{let a=await makeFetchRequestByPID(apiURL,{pid:s,operation:"checkPasses"});handleErrors(a)||("logout"==a?initiate():(loadingScreenFull(0),a.data.transacount_found?quickMessage('Successfully claimed! Check your passes in "My Passes" below.',"success"):quickMessage("No new transaction found. Please retry in 10s","error")))}catch(t){loadingScreenFull(0),quickMessage("Please try again.","error"),console.error(t)}})}function loadPlayerPasses(){chrome.storage.local.get("pid",async function(e){let s=e.pid;loadingScreenFull(1);try{let a=await makeFetchRequestByPID(apiURL,{pid:s,operation:"getPasses"});if(loadingScreenFull(0),!handleErrors(a)){if("logout"==a)initiate();else{showFullOverlay();let t=document.getElementById("voxels-full-overlay-main");t.innerHTML="";let i=document.createElement("div");i.setAttribute("id","voxels-my-passes-area"),i.classList.add("voxels-scroll","voxels-passes-display"),a.data&&a.data.length>0?a.data.forEach(e=>{let s=document.createElement("div");s.classList.add("voxels-pass"),s.innerHTML=`
                                <div class="pass-details"><strong>Pass Code:</strong> ${e.pass_code}</div>
                                <div class="pass-details"><strong>Created:</strong> ${e.created_date}</div>
                                <div class="pass-details"><strong>Redeemed By:</strong> ${e.redeemed_by||"Not redeemed yet"}</div>
                                <div class="pass-details"><strong>Redeemed On:</strong> ${e.redeemed_date||"N/A"}</div>
                                <div class="pass-details"><strong>Guild:</strong> ${e.guild_name||"No guild"}`,i.appendChild(s)}):i.textContent="No passes found",t.appendChild(i)}}}catch(l){loadingScreenFull(0),quickMessage("Please try again.","error"),console.error(l)}})}
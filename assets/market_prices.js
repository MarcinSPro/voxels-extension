function fetchMarketPrices(e){let t=document.querySelectorAll(nodeNames.market_place);if(t.length>0){let r=[],a=[];t.forEach(e=>{if(!e.classList.contains(nodeNames.market_place_header)){let t=e.querySelector(nodeNames.market_place_name+" span");if(t){let c=t.innerText;r.push(c),a.push(e)}}}),r.length>0&&sendRequestByName(r).then(e=>{addPricesToMarket(e,r,a)}).catch(e=>{console.error(e)})}}async function sendRequestByName(e){return new Promise(async(t,r)=>{chrome.storage.local.get("user_info",async function(a){let c={name:a.user_info,operation:"fetchPricesByName",extra:e};try{let n=await makeFetchRequest(apiURL,c),i=n.data,l=e.map(e=>({name:e,price:i[e]}));t(l)}catch(s){r(s)}})})}function addPricesToMarket(e,t,r){e.forEach(e=>{let a=t.indexOf(e.name),c=r[a];if(null!==e.price){let n=c.querySelector(".voxels-market-create-price");if(n){n.innerText=e.price;let i=document.createElement("img");i.src=chrome.runtime.getURL("images/Prices/coin.png"),n.appendChild(i)}else{let l=c.querySelector(nodeNames.market_place_name);if(l){let s=document.createElement("div");s.classList.add("voxels-market-create-price"),s.innerText=e.price;let o=document.createElement("img");o.src=chrome.runtime.getURL("images/Prices/coin.png"),s.appendChild(o),l.appendChild(s)}}}})}
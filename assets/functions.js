let inventoryLoaded=!1,inventoryArray=[],checkInterval,checkHudInterval;const imageBlobToNameMap=new Map([[876,"mine"],[791,"coop"],[1210,"hutch"],[832,"apiary"]]);let imageHashMap,userPremium;function mainInterval(e,t){let n,r,l=!1;function u(){let e=document.querySelectorAll(nodeNames.hudQuantities);e.length>0&&(clearInterval(checkHudInterval),loadInventoryPrices(),checkHudInterval=setInterval(()=>{let e=document.querySelectorAll(nodeNames.hudQuantities);if(0===e.length)clearInterval(checkHudInterval),checkHudInterval=setInterval(u,100);else{let t=document.querySelectorAll(".voxels-inventory-price");0===t.length&&loadInventoryPrices(),r=checkForWindow(r,nodeNames.market_place,".voxels-market-create-price",fetchMarketPrices),l=checkForWindow(l,nodeNames.tasksCard,".voxels-tasks-prices",addTaskPrices),userPremium&&(checkInventoryChange(),l&&checkTasks());let c=new Date,i=(c-n)/1e3;i>=20&&(n=new Date,loadInventoryPrices(),r&&fetchMarketPrices(".voxels-market-create-price"),l&&addTaskPrices(".voxels-tasks-prices"))}},500),n=new Date)}imageHashMap=t,userPremium=e,checkHudInterval=setInterval(u,100)}function checkForWindow(e,t,n,r){let l=document.querySelectorAll(t);if(e){if(0===l.length)return!1;let u=document.querySelectorAll(n);return 0===u.length&&r(n),!0}return l.length>0&&(r(n),!0)}function checkInventoryChange(){let e=getCurrentInventory(!1);if(0===inventoryArray.length||0===e.length){inventoryArray=e;return}let t=compareInventories(inventoryArray,e);!1!==t?(startTimerType(t),inventoryArray=getCurrentInventory(!0)):inventoryArray=e}function getCurrentInventory(e){let t=document.querySelectorAll(nodeNames.hudItems),n=[];return t.forEach(t=>{let r=t.querySelector(nodeNames.hudItemImage),l=t.querySelector(nodeNames.hudQuantities),u=parseInt(t.querySelector(nodeNames.hudShortcut).textContent)-1;if(r&&l&&e){let c=r.src;fetch(c,{method:"GET"}).then(e=>e.headers.get("Content-Length")).then(e=>{let t=l.textContent.replace("x",""),r=parseInt(t)||1;n[u]={length:e,quantity:r}}).catch(e=>console.error("Error fetching blob:",e))}else if(l){let i=l.textContent.replace("x",""),a=parseInt(i)||1;n[u]={length:null,quantity:a}}else n[u]=null}),n}function compareInventories(e,t){for(let n=0;n<t.length;n++){let r=t[n],l=e[n];if(null!==r&&(null===l&&r.quantity>=1&&r.quantity<=5||null!==l&&r.quantity>l.quantity&&r.quantity<=l.quantity+5)){let u=fetchImageAndCheckContent(n);if(!1!==u)return u}}return!1}function fetchImageAndCheckContent(e){let t=[].slice.call(document.querySelectorAll(nodeNames.hudShortcut)).filter(function(t){return t.innerHTML.trim()===String(e+1)}),n=t[0].parentElement,r=n.querySelector(nodeNames.hudItemImage);if(r){let l=calculateAverageColor(r);if(imageHashMap[l])return imageHashMap[l]}return!1}function isEqual(e,t){return JSON.stringify(e)===JSON.stringify(t)}
function loadPremium(){let e=document.querySelector(".voxels-main");chrome.storage.local.get("user_info",async function(t){let a=t.user_info;try{let t=await makeFetchRequest(apiURL,{name:a,operation:"getPremium"});handleErrors(t)||("logout"==t?initiate():(loadPremiumDiv(e,t.data,a),loadFeatureDiv(e)))}catch(e){console.error(e)}})}function loadPremiumDiv(e,t,a){var n=document.createElement("div");n.classList.add("voxels-main-premium","pixel-border","voxels-premium-main");var r=document.createElement("div");r.classList.add("voxels-premium-title"),r.innerText="VOXELS PREMIUM",n.appendChild(r);var i=document.createElement("div");i.classList.add("voxels-premium-content");let o=t.premium,s=t.wallet_address||!1;if(o){let e=new Date().getTime();if(1e3*t.premium_end>e){let e=loadPremiumEnd(t.premium_end);i.appendChild(e)}}let l=loadUserData(a,s);i.appendChild(l);let d=t.pixels_price,m=loadPrice(d);i.appendChild(m);var c=document.createElement("hr");c.classList.add("voxels-premium-spacer"),i.appendChild(c);let p=t.voxels_addresses;i.appendChild(loadPremiumHowTo(d,a,p)),(c=document.createElement("hr")).classList.add("voxels-premium-spacer"),i.appendChild(c),i.appendChild(loadFAQ()),i.appendChild(loadHelp()),n.appendChild(i),"premium"==currentActiveTab&&e.appendChild(n)}function loadPremiumEnd(e){var t=document.createElement("div");t.classList.add("voxels-premium-end");var a=new Date(1e3*e).toLocaleString();return t.innerHTML="<p>Premium active:<br><span>Ends on "+a+"</span></p>",t}function loadUserData(e,t){var a=document.createElement("div");if(a.classList.add("voxels-premium-data"),a.innerHTML+="<p>Username: <span>"+e+"</span></p>",!1===t)a.innerHTML+="<p>Your wallet: <span>Not found</span></p>";else{var n=t.replace(/^(.{5})(.*)(.{5})$/,"$1...$3");a.innerHTML+="<p>Your wallet: <span>"+n+"</span></p>"}return a}function loadPrice(e){var t=document.createElement("div");return t.classList.add("voxels-premium-price"),t.innerHTML="<p>Premium (1 Month): <span><img class='pixels-icon' src='"+chrome.runtime.getURL("images/Other/Pixel.png")+"'>"+e+"</span></p>",t}function loadPremiumHowTo(e,t,a){var n=document.createElement("div");n.classList.add("voxels-premium-info"),n.innerHTML="<p>How to get Premium:</p><p><span>Send <img class='pixels-icon' src='"+chrome.runtime.getURL("images/Other/Pixel.png")+"'>"+e+" from your wallet connected to <span style='color: var(--main-new-bg);'>"+t+"</span> to:</span></p>";var r=document.createElement("p");r.classList.add("voxels-premium-copy"),r.setAttribute("id","voxels-copy"),r.innerHTML=a.rns+"<img src='"+chrome.runtime.getURL("images/icons/icon__copy.svg")+"' alt='Copy Icon'>",n.appendChild(r),r.addEventListener("click",function(){var e=document.createElement("textarea");e.value=a.rns,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e);var t=document.createElement("div");t.classList.add("voxels-hover-box"),t.textContent="Copied!",document.body.appendChild(t);var n=r.getBoundingClientRect();t.style.position="absolute",t.style.top=n.top-t.offsetHeight+"px",t.style.left=n.left+"px",setTimeout(function(){document.body.removeChild(t)},2e3)});var i=document.createElement("p");i.classList.add("voxels-premium-copy");let o=a.base.replace(/^(.{6})(.*)(.{6})$/,"$1...$3");i.innerHTML="<span>"+o+"</span>",n.appendChild(i);var s=document.createElement("p");s.innerHTML="<span>After sending $PIXEL click:</span>",n.appendChild(s);var l=document.createElement("p");l.classList.add("voxels-premium-reload"),l.innerHTML="Claim Premium<img src='"+chrome.runtime.getURL("images/icons/icon__refresh.svg")+"' alt='Refresh Icon'>",n.appendChild(l);var d=0;return l.addEventListener("click",function(){var e=Date.now();if(e-d<1e4){showAlert("Please wait 10s before retrying.","error");return}d=e,l.disabled=!0,setTimeout(function(){l.disabled=!1},1e4),checkPremium(t)}),n}async function checkPremium(e){try{let t=await makeFetchRequest(apiURL,{name:e,operation:"checkPremium"});handleErrors(t)||("logout"==t?initiate():"paid"==t.data&&(showAlert("Successfully claimed Premium! Reload play.pixels.xyz","success"),reloadVoxels()))}catch(e){console.error(e)}}function loadFAQ(){var e=document.createElement("div");e.classList.add("voxels-premium-faq");var t=document.createElement("p");t.innerHTML="FAQ",e.appendChild(t);var a=[["How to renew Premium?",'Every time you send $PIXEL and click "Claim Premium" your Premium will be prolonged by another 30 days.'],["I sent $PIXEL but didn't receive premium?",'Check that your transaction has settled and click "Claim Premium". If you haven\'t received premium after 5 minutes contact us on <a href="https://discord.gg/jKnhzscVn3" target="_blank">Discord</a>'],["Why has the $PIXEL amount changed?","As the market situation can be rather volatile we aim to keep the premium price for Voxels stable."]],n=document.createElement("ol");for(let e=0;e<a.length;e++){var r=document.createElement("li"),t=a[e][0],i=a[e][1];r.appendChild(document.createTextNode(t));var o=document.createElement("span");o.innerHTML="<br>"+i,r.appendChild(o),n.appendChild(r)}return e.appendChild(n),e}function loadHelp(){var e=document.createElement("div");e.classList.add("voxels-premium-help");var t=document.createElement("a");t.href="https://discord.gg/jKnhzscVn3",t.target="_blank",t.innerHTML='<img src="'+chrome.runtime.getURL("images/icons/icon__discord.svg")+'" alt="Discord Icon">',e.appendChild(t);var a=document.createElement("a");return a.href="https://twitter.com/VoxelsExtension",a.target="_blank",a.innerHTML='<img src="'+chrome.runtime.getURL("images/icons/icon__X.svg")+'" alt="X Icon">',e.appendChild(a),e}function loadFeatureDiv(e){var t=document.createElement("div");t.classList.add("voxels-main-premium","pixel-border","voxels-premium-feature");var a=document.createElement("div");a.classList.add("voxels-premium-title"),a.innerText="Premium features",t.appendChild(a);var n=document.createElement("div");n.classList.add("voxels-premium-content");var r=[["50 Plots","Add up to 50 plots/locations to track farm timers (more timers coming soon: trees etc.).","timers.png"],["20 Storages","Track 20 storages and view their contents from anywhere!","storages.png"],["Auto-Detect collecting","Voxels automatically starts the timer for your farm. Make sure to add the location first."],["Total tasks cost","View the total cost of your task, if you would buy the items on the market place.","task_cost.png"],["Display tasks","Track your current tasks for Hazel from anywhere!","tasks_display.png"],["Discord Premium","Get a special premium role on the Voxels discord and take part in premium events!"]],i=document.createElement("ol");for(let e=0;e<r.length;e++){var o=document.createElement("li"),s=r[e][0],l=r[e][1],d=r[e][2];if(o.appendChild(document.createTextNode(s)),d){var m=document.createElement("img");m.src=chrome.runtime.getURL("images")+"/Premium/"+d,m.classList.add("voxels-premium-feature-image"),o.appendChild(m);var c=document.createElement("span");c.innerHTML=l,o.appendChild(c)}else{var c=document.createElement("span");c.innerHTML="<br>"+l,o.appendChild(c)}i.appendChild(o)}n.appendChild(i),t.appendChild(n),"premium"==currentActiveTab&&e.appendChild(t)}
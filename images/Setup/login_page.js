let instanceActive=!0;function getGameInstance(e){let t=window.Phaser;if(void 0!==t){let a=window.Phaser,n=a.Game,s=new Proxy(n,{construct:function t(a,n){let s=new a(...n);return e(s),s}});a.Game=s}else setTimeout(()=>getGameInstance(e),50)}function runGameInstance(e){!function t(){if(e.scene.scenes[1]){if(instanceActive){let a=e.scene.scenes[1].selfPlayer.playerData.label;window.postMessage({type:"VOXELS_PLAYER_LABEL",label:a})}let n=getPlayerData(e);n.inventoryData&&window.postMessage({type:"VOXELS_INV_DATA",data:n.inventoryData})}setTimeout(t,200)}()}function getPlayerData(e){let t=[];if(e.scene.scenes[1]){let a=e.scene.scenes[1],n=a.playerId,s=a.sys.config,c=s.match(/\d+/),i=c?c[0]:"unknown",l;l=s.includes("House")?`${i}-house`:s.includes("Farm")?`${i}-farm`:`${i}-unknown`;let r=a.stateManager.selfPlayer?a.stateManager.selfPlayer.inventory:null,o=null;if(r){let u=r.size,y=r.activeRow,f=r.slots.$items,m=[];f.forEach((e,t)=>{m.push({slot:t,item:e.item,quantity:e.quantity})}),o={size:u,activeRow:y,items:m}}t={playerId:n,location:l,inventoryData:o}}return t}window.postMessage({type:"VOXELS_INITIATED"}),window.addEventListener("message",e=>{e.source===window&&e.data.type&&"VOXELS_SET_INSTANCE_ACTIVE"===e.data.type&&(instanceActive=e.data.value)}),getGameInstance(runGameInstance);